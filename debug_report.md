# Debug Report: API Gateway 404 & Job Status Issue

## Executive Summary
The `404 Not Found` error observed when polling `/api/job-status` is **not** caused by an API Gateway misconfiguration. It is an application-level response ("Job not found") originating from the Lambda function, indicating that the requested Job ID or LinkedIn Profile URL could not be found in the DynamoDB table.

The API Gateway configuration (GET method with POST integration) is **correct** for AWS Proxy Integrations.

## Detailed Findings

### 1. API Gateway Configuration Verified
*   **Observation**: The `GET /api/job-status` method uses an `AWS_PROXY` integration with `httpMethod: "POST"`.
*   **Analysis**: This is the standard and required configuration for Lambda Proxy integrations. API Gateway wraps the incoming GET request in a JSON event and invokes the Lambda function via a POST request. Validating this with `curl` confirmed that the Lambda function is indeed receiving requests.
*   **Conclusion**: No changes to the API Gateway integration are needed or recommended. Changing the integration method to `GET` would break the Lambda invocation.

### 2. The "404 Not Found" Error
*   **Source**: The 404 status code is generated by the Lambda function logic (`resumeUpload.mjs`), not the API Gateway infrastructure.
*   **Proof**: The response body `{"success":false,"message":"Job not found"}` confirms the Lambda executed, queried the database, failed to find the record, and returned this specific error message.

### 3. Data Discrepancy & Root Cause
Investigating the DynamoDB table `ResumeForge` revealed a likely cause for the lookup failure:
*   **Database Record**:
    *   **Partition Key (`linkedinProfileUrl`)**: `https://www.linkedin.com/in/pushkar-mishraa/  Github : https://github.com/p2k3m`
    *   **Job ID**: `ca452764-ee33-4cbc-87ab-b9ee49977bcd`
*   **Mismatch**: The frontend is likely sending the standard LinkedIn URL (e.g., `https://www.linkedin.com/in/pushkar-mishraa/`) without the appended "Github : ..." suffix.
    *   The Lambda tries to look up the item by the exact `linkedinProfileUrl` string. If it doesn't match the DB key exactly, the lookup fails.
    *   The code then attempts a fallback scan using `jobId`. If this scan also fails (e.g., due to permissions or timeout), the result is "Job not found".

## Recommendations

1.  **Frontend/Data Validation**: Ensure the `linkedinProfileUrl` used during retrieval matches exactly how it was saved during upload. It appears the upload process is appending extra data (Github profile) to the key.
2.  **Verify Job ID**: Confirmed that `jobId` `ca452764-ee33-4cbc-87ab-b9ee49977bcd` exists in the table. If polling with this ID, the fallback scan *should* find it.
3.  **Infrastructure**: Do not attempt to modify the API Gateway integration method to `GET`. The API Gateway is currently unmanaged by Terraform in this repository (likely deployed via CloudFormation/SAM/CDK or manually).

## Next Steps to Fix "Job Not Found"
*   **Immediate Fix**: Poll using the exact Partition Key string found in DynamoDB (including Github suffix).
*   **Long-term Fix**: Update the `resumeUpload` Lambda (or the code generating the key) to sanitize the `linkedinProfileUrl` so it is consistent between Upload and Status Check. Ideally, store the Github URL in a separate attribute, not appended to the Partition Key.
